<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¤§å‹å®¶å…·å›æ”¶é ç´„å¹³å° - è³‡æ–™åº«è¨­è¨ˆ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 20px;
    }
    h1, h2 {
      color: #2C3E50;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      margin-bottom: 20px;
    }
    th, td {
      padding: 12px;
      border: 1px solid #ccc;
      text-align: left;
    }
    th {
      background-color: #34495E;
      color: #fff;
    }
    .description {
      background-color: #f9f9f9;
      padding: 15px;
      margin-top: 10px;
      border: 1px solid #ccc;
    }
    .toggle-buttons {
      margin-bottom: 20px;
    }
    button {
      padding: 8px 16px;
      margin-right: 10px;
      font-size: 14px;
    }
    #table-view, #mermaid-view {
      display: none;
    }
    #table-view.active, #mermaid-view.active {
      display: block;
    }
    pre {
      background: #f9f9f9;
      padding: 20px;
      border: 1px solid #ddd;
      overflow-x: auto;
    }
  </style>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: false });
    window.renderMermaid = () => {
      mermaid.run({ nodes: [document.querySelector("#mermaid-graph")] });
    };
  </script>
</head>
<body>
<h1>å¤§å‹å®¶å…·å›æ”¶é ç´„å¹³å° - è³‡æ–™åº«è¨­è¨ˆ</h1>
<div class="toggle-buttons">
  <button onclick="showView('table')">ğŸ“‹ è³‡æ–™è¡¨æª¢è¦–</button>
  <button onclick="showView('mermaid')">ğŸ“Š ERD æµç¨‹åœ–</button>
</div>
<div id="table-view" class="active">
<!-- Users Table -->
<h2>1. `users` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>åƒæ•¸å‹æ…‹</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>id</td>
    <td>INT</td>
    <td>ä¸»éµï¼Œè‡ªå¢</td>
  </tr>
  <tr>
    <td>username</td>
    <td>VARCHAR(255)</td>
    <td>ä½¿ç”¨è€…åç¨±ï¼Œå”¯ä¸€</td>
  </tr>
  <tr>
    <td>password</td>
    <td>VARCHAR(255)</td>
    <td>ä½¿ç”¨è€…å¯†ç¢¼</td>
  </tr>
  <tr>
    <td>email</td>
    <td>VARCHAR(255)</td>
    <td>ä½¿ç”¨è€…é›»å­éƒµä»¶</td>
  </tr>
  <tr>
    <td>created_at</td>
    <td>TIMESTAMP</td>
    <td>è¨»å†Šæ™‚é–“</td>
  </tr>
  <tr>
    <td>updated_at</td>
    <td>TIMESTAMP</td>
    <td>æœ€å¾Œæ›´æ–°æ™‚é–“</td>
  </tr>
  <tr>
    <td>is_manager</td>
    <td>BOOLEAN</td>
    <td>æ˜¯å¦ç‚ºå¾Œå°ç®¡ç†å“¡</td>
  </tr>
  </tbody>
</table>

<!-- Furniture Requests Table -->
<h2>2. `furniture_requests` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>åƒæ•¸å‹æ…‹</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>id</td>
    <td>INT</td>
    <td>ä¸»éµï¼Œè‡ªå¢</td>
  </tr>
  <tr>
    <td>name</td>
    <td>VARCHAR(255)</td>
    <td>å®¶å…·åç¨±</td>
  </tr>
  <tr>
    <td>type</td>
    <td>VARCHAR(100)</td>
    <td>å®¶å…·é¡å‹</td>
  </tr>
  <tr>
    <td>dimensions</td>
    <td>VARCHAR(100)</td>
    <td>å®¶å…·å°ºå¯¸ (ä¾‹å¦‚ï¼šé•·Ã—å¯¬Ã—é«˜)</td>
  </tr>
  <tr>
    <td>material</td>
    <td>VARCHAR(100)</td>
    <td>å®¶å…·ææ–™</td>
  </tr>
  <tr>
    <td>weight</td>
    <td>DECIMAL(10,2)</td>
    <td>å®¶å…·é‡é‡ (å…¬æ–¤)</td>
  </tr>
  <tr>
    <td>status</td>
    <td>VARCHAR(50)</td>
    <td>å®¶å…·å›æ”¶ç‹€æ…‹</td>
  </tr>
  <tr>
    <td>created_at</td>
    <td>TIMESTAMP</td>
    <td>å»ºç«‹æ™‚é–“</td>
  </tr>
  <tr>
    <td>updated_at</td>
    <td>TIMESTAMP</td>
    <td>æœ€å¾Œæ›´æ–°æ™‚é–“</td>
  </tr>
  </tbody>
</table>

<!-- Recycling Points Table -->
<h2>3. `recycling_points` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>åƒæ•¸å‹æ…‹</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>id</td>
    <td>INT</td>
    <td>ä¸»éµï¼Œè‡ªå¢</td>
  </tr>
  <tr>
    <td>name</td>
    <td>VARCHAR(255)</td>
    <td>å›æ”¶é»åç¨±</td>
  </tr>
  <tr>
    <td>address</td>
    <td>VARCHAR(255)</td>
    <td>åœ°å€</td>
  </tr>
  <tr>
    <td>latitude</td>
    <td>DECIMAL(9,6)</td>
    <td>ç¶“åº¦</td>
  </tr>
  <tr>
    <td>longitude</td>
    <td>DECIMAL(9,6)</td>
    <td>ç·¯åº¦</td>
  </tr>
  <tr>
    <td>available</td>
    <td>BOOLEAN</td>
    <td>æ˜¯å¦å¯ç”¨</td>
  </tr>
  <tr>
    <td>created_at</td>
    <td>TIMESTAMP</td>
    <td>å»ºç«‹æ™‚é–“</td>
  </tr>
  <tr>
    <td>updated_at</td>
    <td>TIMESTAMP</td>
    <td>æœ€å¾Œæ›´æ–°æ™‚é–“</td>
  </tr>
  </tbody>
</table>

<!-- Service Slots Table -->
<h2>4. `service_slots` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>åƒæ•¸å‹æ…‹</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>id</td>
    <td>INT</td>
    <td>ä¸»éµï¼Œè‡ªå¢</td>
  </tr>
  <tr>
    <td>user_id</td>
    <td>INT</td>
    <td>å¤–éµï¼ŒæŒ‡å‘ `Users` è¡¨</td>
  </tr>
  <tr>
    <td>recycling_point_id</td>
    <td>INT</td>
    <td>å¤–éµï¼ŒæŒ‡å‘ `Recycling Points` è¡¨</td>
  </tr>
  <tr>
    <td>date</td>
    <td>DATE</td>
    <td>å›æ”¶æ—¥æœŸ</td>
  </tr>
  <tr>
    <td>time_slot</td>
    <td>VARCHAR(50)</td>
    <td>å›æ”¶æ™‚æ®µ</td>
  </tr>
  <tr>
    <td>furniture_list</td>
    <td>TEXT</td>
    <td>å®¶å…·æ¸…å–® (JSON æ ¼å¼)</td>
  </tr>
  <tr>
    <td>status</td>
    <td>VARCHAR(50)</td>
    <td>ç”³è«‹ç‹€æ…‹ (NEW, ACCEPTED, CANCELED)</td>
  </tr>
  <tr>
    <td>created_at</td>
    <td>TIMESTAMP</td>
    <td>å»ºç«‹æ™‚é–“</td>
  </tr>
  <tr>
    <td>updated_at</td>
    <td>TIMESTAMP</td>
    <td>æœ€å¾Œæ›´æ–°æ™‚é–“</td>
  </tr>
  </tbody>
</table>

<!-- Delivery Schedules Table -->
<h2>5. `delivery_schedules` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>schedule_id</td>
    <td>æ’ç¨‹å”¯ä¸€è­˜åˆ¥ç¢¼ (Primary Key)</td>
  </tr>
  <tr>
    <td>request_id</td>
    <td>å›æ”¶ç”³è«‹ ID (Foreign Key, ä¾†è‡ª `furniture_requests`)</td>
  </tr>
  <tr>
    <td>vehicle_id</td>
    <td>è»Šè¼› ID (Foreign Key, ä¾†è‡ª `vehicles`)</td>
  </tr>
  <tr>
    <td>eta</td>
    <td>é è¨ˆåˆ°é”æ™‚é–“ï¼ˆETAï¼‰</td>
  </tr>
  <tr>
    <td>status</td>
    <td>æ’ç¨‹ç‹€æ…‹ (å¦‚ PENDING, IN_PROGRESS, COMPLETED ç­‰)</td>
  </tr>
  </tbody>
</table>

<!-- Vehicles Table -->
<h2>6. `vehicles` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>vehicle_id</td>
    <td>è»Šè¼›å”¯ä¸€è­˜åˆ¥ç¢¼ (Primary Key)</td>
  </tr>
  <tr>
    <td>plate_number</td>
    <td>è»Šè¼›è»Šç‰Œè™Ÿç¢¼</td>
  </tr>
  <tr>
    <td>capacity_length</td>
    <td>è»Šè¼›å®¹é‡é•·åº¦</td>
  </tr>
  <tr>
    <td>capacity_width</td>
    <td>è»Šè¼›å®¹é‡å¯¬åº¦</td>
  </tr>
  <tr>
    <td>capacity_height</td>
    <td>è»Šè¼›å®¹é‡é«˜åº¦</td>
  </tr>
  <tr>
    <td>status</td>
    <td>è»Šè¼›ç‹€æ…‹ (å¦‚ AVAILABLE, IN_USE, MAINTENANCE ç­‰)</td>
  </tr>
  </tbody>
</table>

<!-- Reports Table -->
<h2>7. `reports` è¡¨æ ¼</h2>
<table border="1">
  <thead>
  <tr>
    <th>æ¬„ä½åç¨±</th>
    <th>æè¿°</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>report_id</td>
    <td>å ±è¡¨å”¯ä¸€è­˜åˆ¥ç¢¼ (Primary Key)</td>
  </tr>
  <tr>
    <td>report_data</td>
    <td>å ±è¡¨å…§å®¹ï¼ˆé€šå¸¸ç‚º JSON æ ¼å¼ï¼‰</td>
  </tr>
  <tr>
    <td>created_at</td>
    <td>å ±è¡¨å‰µå»ºæ™‚é–“</td>
  </tr>
  </tbody>
</table>
</div>
<!-- Mermaid ERD -->
<div id="mermaid-view">
  <div class="mermaid" id="mermaid-graph">
    erDiagram
    USERS {
    INT id PK
    VARCHAR username
    VARCHAR password
    VARCHAR email
    BOOLEAN is_manager
    TIMESTAMP created_at
    TIMESTAMP updated_at
    }

    FURNITURE_REQUESTS {
    INT id PK
    VARCHAR name
    VARCHAR type
    VARCHAR dimensions
    VARCHAR material
    DECIMAL weight
    VARCHAR status
    TIMESTAMP created_at
    TIMESTAMP updated_at
    }

    RECYCLING_POINTS {
    INT id PK
    VARCHAR name
    VARCHAR address
    DECIMAL latitude
    DECIMAL longitude
    BOOLEAN available
    TIMESTAMP created_at
    TIMESTAMP updated_at
    }

    SERVICE_SLOTS {
    INT id PK
    INT user_id FK
    INT recycling_point_id FK
    DATE date
    VARCHAR time_slot
    TEXT furniture_list
    VARCHAR status
    TIMESTAMP created_at
    TIMESTAMP updated_at
    }

    DELIVERY_SCHEDULES {
    INT schedule_id PK
    INT request_id FK
    INT vehicle_id FK
    DATETIME eta
    VARCHAR status
    }

    VEHICLES {
    INT vehicle_id PK
    VARCHAR plate_number
    DECIMAL capacity_length
    DECIMAL capacity_width
    DECIMAL capacity_height
    VARCHAR status
    }

    REPORTS {
    INT report_id PK
    JSON report_data
    TIMESTAMP created_at
    }

    USERS ||--o{ SERVICE_SLOTS : has
    RECYCLING_POINTS ||--o{ SERVICE_SLOTS : provides
    FURNITURE_REQUESTS ||--o{ DELIVERY_SCHEDULES : requested_by
    VEHICLES ||--o{ DELIVERY_SCHEDULES : delivers

  </div>
</div>

<script>
  function showView(view) {
    document.getElementById('table-view').classList.remove('active');
    document.getElementById('mermaid-view').classList.remove('active');

    if (view === 'table') {
      document.getElementById('table-view').classList.add('active');
    } else {
      document.getElementById('mermaid-view').classList.add('active');
      window.renderMermaid();
    }
  }
</script>
</body>
</html>